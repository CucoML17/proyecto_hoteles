<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Clientes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/indexcss.css}">
    <link rel="stylesheet" th:href="@{/css/indecssbody.css}">
    <link rel="stylesheet" th:href="@{/css/cssAdmin.css}">
    <link rel="stylesheet" th:href="@{/css/cssHoteles.css}">
    
</head>
<body>

    <div th:insert="admin/fragment/headertop :: admin-cabecera-top" class="top-navbar bg-black text-white py-2">

    </div>

    <nav th:insert="admin/fragment/headerbottom :: admin-cabecera-bottom" class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  
    </nav>


    <div th:insert="admin/fragment/clientesub :: sub-cliente" class="admin-subheader">

    </div>

    <div class="container mt-4">
        <h2 class="text-center">Lista de Clientes</h2>

		<form method="post" th:action="@{/cliente/admin/filtrarClientes}">
	        <div class="d-flex justify-content-center">
	            <div style="max-width: 600px; width: 100%;">
	                <div class="mb-3 d-flex align-items-center">
	                    <label class="form-label me-2">Filtrar por:</label>
	                    <select class="form-select me-2" id="filterType" name="campoFiltro">
	                        <option value="id">Clave de cliente</option>
	                        <option value="nombre">Nombre</option>
	                        <option value="apellido">Apellido</option>
	                    </select>
	                    <div class="form-check me-2">
	                        <input class="form-check-input" type="checkbox" id="filterInputCheckbox" name="activarFiltro">
	                        <label class="form-check-label" for="filterInputCheckbox">Activar filtro</label>
	                    </div>
	                    <div id="filterInputContainer" style="width: 100%; text-align: center;">
	                        <input type="text" class="form-control" id="filterInput" placeholder="Ingrese el valor" name="valorFiltro" style="display: none; width: 90%; margin: 10px auto;">
	                    </div>
	                </div>
	                <div class="text-center">
	                    <button type="submit" class="btn btn-warning">Filtrar</button>
	                    <a th:href="@{/cliente/admin/listaClientes}" class="btn btn-secondary ms-2">Limpiar Filtros</a>
	                </div>
	            </div>
	        </div>
        </form>

        <!-- <div class="d-flex justify-content-center mt-3">
            <button class="btn btn-primary">Nuevo Cliente</button>
        </div> -->
        
      	<div th:if="${mensajeExito}" class="alert alert-success" role="alert">
		    <span th:text="${mensajeExito}"></span>
		</div>
		
			
		<div th:if="${mensajeExitoBorra}" class="alert alert-warning" role="alert">
		    <span th:text="${mensajeExitoBorra}"></span>
		</div>     
		
        <div th:if="${mensajeFiltro}" class="alert alert-success" role="alert">
		    <span th:text="${mensajeFiltro}"></span>
		</div>	        

        <table class="table hotel-table mt-4">
            <thead class="hotel-thead">
                <tr>
                    <th>Clave</th>
                    <th>Nombre</th>
                    <th>Foto</th>
                    <th>Teléfono</th>
                    <th>Acciones</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each = "cliente : ${listaClientes}">
                    <td th:text="${cliente.id}">CL12345</td>
                    <td th:text="${cliente.nombre} + ' ' + ${cliente.apellido}">Juan Pérez</td>
                    <td><img th:src="@{'/imagenes/clientes/' + ${cliente.fotoCliente}}" alt="Foto Juan" width="50"></td>
                    <td th:text="${cliente.telefono}">123-456-7890</td>
                    <td>
                        <a th:href="@{/cliente/admin/verMas/{id}(id=${cliente.id})}" class="btn btn-sm btn-primary">Ver perfil</a>
                        
                    </td>
                    
					<td th:if="${cliente.estado == 1}"><a th:href="@{/cliente/admin/cambiarEstado/{id}(id=${cliente.id})}" type="button" class="btn btn-success">Activo</a></td>
					<td th:unless="${cliente.estado == 1}"><a th:href="@{/cliente/admin/cambiarEstado/{id}(id=${cliente.id})}" type="button" class="btn btn-danger">Inactivo</a></td>                    
                    
                </tr>

            </tbody>
        </table>
    </div>

    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p>&copy; 2024 Cuco Corp. Todos los derechos reservados.</p>
    </footer>

    <script>
        window.addEventListener('scroll', function() {
            const navbarHeight = document.querySelector('.navbar').offsetHeight;
            document.querySelector('.admin-subheader').style.top = navbarHeight + 'px';
        });

        document.getElementById('filterInputCheckbox').addEventListener('change', function() {
            document.getElementById('filterInput').style.display = this.checked ? 'block' : 'none';
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/13c51e858e.js" crossorigin="anonymous"></script>
</body>
</html>