<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración de hoteles</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/indexcss.css}"> 
    <link rel="stylesheet" th:href="@{/css/indecssbody.css}"> 
    <link rel="stylesheet" th:href="@{/css/cssAdmin.css}"> 
    <link rel="stylesheet" th:href="@{/css/cssHoteles.css}">
</head>
<body>

    <div th:insert="admin/fragment/headertop :: admin-cabecera-top" class="top-navbar bg-black text-white py-2">

    </div>

    <nav th:insert="admin/fragment/headerbottom :: admin-cabecera-bottom" class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  
    </nav>


    <div th:insert="admin/fragment/hotelessub :: sub-hoteles" class="admin-subheader">

    </div>


    <div class="container mt-4">
        <h2 class="text-center">Lista de hoteles</h2>

				
		<form id="buscaHotelForm" method="post" th:action="@{/hotel/admin/buscar}">
	        <div class="input-group mb-4 custom-input-group">
	            <select class="form-select" id="filterType" name="tipoBusca">
	                <option th:value="nombre">Nombre</option>
	                <option th:value="precio">Precio promedio</option>
	                <option th:value="direccion">Dirección</option>
	                <option th:value="estado">Estado</option>
	            </select>
	            <input type="text" class="form-control" placeholder="Buscar..." name="valorBusca">
	            <button class="btn btn-outline-secondary" type="submit">
	                <i class="fas fa-filter"></i>
	            </button>
	        </div>
	
	        <div class="d-flex align-items-center mb-4 custom-input-group">
	            <!-- <button class="btn btn-outline-primary me-2">Ordenar</button>  -->
	            <select class="form-select me-2" id="orderType" name="ordenar">
	                <option value="asc">Ascendente <i class="fas fa-sort-up"></i></option>
	                <option value="desc">Descendente <i class="fas fa-sort-down"></i></option>
	            </select>
	            <div id="priceRange" style="display: none;">
	                <input type="number" name="min" th:value="0" class="form-control me-2" placeholder="Min:">
	                <input type="number" name="max" th:value="0" class="form-control" placeholder="Max:">
	            </div>
	            <div id="estadoFilter" style="display: none;">
	                <select class="form-select estado-select" name="estado">
	                    <option th:value="activo">Activo</option>
	                    <option th:value="inactivo">Inactivo</option>
	                </select>
	            </div>
	        </div>  
        
        </form>
        
       	<div th:if="${mensajeExito}" class="alert alert-success" role="alert">
		    <span th:text="${mensajeExito}"></span>
		</div>
		
			
		<div th:if="${mensajeExitoBorra}" class="alert alert-warning" role="alert">
		    <span th:text="${mensajeExitoBorra}"></span>
		</div>        


        <table class="table hotel-table">
            <thead class="hotel-thead">
                <tr>
                    <th>Foto</th>
                    <th>Nombre</th>
                    <th>Email</th>
                    <th>Teléfonos</th>
                    <th>Dirección</th>
                    <th>Precio promedio</th>
                    
                    <th>Acciones</th>
                    
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each = "hotel : ${listaHoteles}">
					<td>
					<!--<img th:src="@{/images/{imgtmp} (imgtmp=${producto.imagen})}" style="height: 100px; width: 100px; margin-right: 15px;"-->
					<img th:src="@{'/imagenes/hoteles/' + ${hotel.fotoHotel}}" style="height: 100px; width: 100px; margin-right: 15px;">
					</td> 
					
                    <td th:text="${hotel.nombre}"></td>
                    <td th:text="${hotel.email}"></td>
                    
                    <td>
                    	<ul th:each = "tel : ${hotel.telefonos}">
                    	<li th:text="${tel.telefono}"></li>
                    	
                    	</ul>
                    	
                    </td>
                    
                    <td th:text="${hotel.direccion}"></td>
                    <td th:text="'$' + ${#numbers.formatDecimal(hotel.precioPromedio, 1, 2)}">$100</td>
                    
                    <td>
                        <a th:href="@{/hotel/admin/verMas/{id}(id=${hotel.id})}" class="btn btn-sm btn-primary">Ver más</a>
                   
                        <a th:href="@{/habitacion/admin/listaHabitaciones/{id}(id=${hotel.id})}" class="btn btn-sm btn-secondary">Habitaciones</a>
                
                        <a th:href="@{/hotel/admin/editar/{id}(id=${hotel.id})}" class="btn btn-sm btn-warning">Editar</a>
						
                    </td>
                    
					<td th:if="${hotel.estado == 1}"><a th:href="@{/hotel/admin/cambiarEstado/{id}(id=${hotel.id})}" type="button" class="btn btn-success">Activo</a></td>
					<td th:unless="${hotel.estado == 1}"><a th:href="@{/hotel/admin/cambiarEstado/{id}(id=${hotel.id})}" type="button" class="btn btn-danger">Inactivo</a></td>                    
                </tr>

            </tbody>
        </table>
    </div>


    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p>&copy; 2024 Cuco Corp. Todos los derechos reservados.</p>
    </footer>


    <script>

        window.addEventListener('scroll', function() {
            const navbarHeight = document.querySelector('.navbar').offsetHeight;
            document.querySelector('.admin-subheader').style.top = navbarHeight + 'px';
        });        
    </script>    

    <script>
        document.getElementById('filterType').addEventListener('change', function() {
            document.getElementById('priceRange').style.display = 'none';
            document.getElementById('estadoFilter').style.display = 'none';

            if (this.value === 'precio') {
                document.getElementById('priceRange').style.display = 'flex';
            } else if (this.value === 'estado') {
                document.getElementById('estadoFilter').style.display = 'flex';
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/13c51e858e.js" crossorigin="anonymous"></script>
</body>
</html>