<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle reservación</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/indexcss.css}">
    <link rel="stylesheet" th:href="@{/css/indecssbody.css}">
    <link rel="stylesheet" th:href="@{/css/cssdetalleReserva.css}">
</head>
<body>

    <div th:insert="user/fragment/headertop :: cabecera-top" class="top-navbar bg-black text-white py-2">

    </div>

    <nav th:insert="user/fragment/headerbottom :: cabecera-bottom" class="navbar navbar-expand-lg navbar-light bg-light sticky-top ">

    </nav>



    <div class="container mt-5">
        <div class="reservation-details">
            <h2 class="text-center mb-4" th:text="${titulo}">Reservación número 12345</h2>


		    <div th:if="${mensajeExito}" class="alert alert-success" role="alert">
		        <p th:text="${mensajeExito}"></p>
		    </div>
		    <div th:if="${mensajeError}" class="alert alert-danger" role="alert">
		        <p th:text="${mensajeError}"></p>
		    </div>
		    <div th:if="${mensajeInfo}" class="alert alert-info" role="alert">
		        <p th:text="${mensajeInfo}"></p>
		    </div>

            <div class="row">
                <div class="col-md-6">
                    <p><strong>Número de reservación:</strong> <span th:text="${reserva.codigoReserva}"></span></p>
                    <hr>
                    <p><strong>Hotel:</strong> <span th:text="${hotel.nombre}"></span></p>
                    <hr>
                    <p><strong>Número de habitación:</strong> <span th:text="${habitacion.numeroHabitacion}"></span></p>
                    <hr>
                    <p><strong>Empleado que atendió:</strong>
                        <span th:if="${reserva.idReservaEmpleado == null}">No antendido</span>
                        <span th:unless="${reserva.idReservaEmpleado == null}" th:text="${reserva.idReservaEmpleado.nombre}"></span>
                        
                        </p>
                    <hr>
                    <p><strong>Fecha de entrada:</strong> <span th:text="${#dates.format(reserva.fechainicio, 'dd-MM-yyyy')}"></span></p>
                    <hr>
                    <p><strong>Fecha de salida:</strong> <span th:text="${#dates.format(reserva.fechafin, 'dd-MM-yyyy')}"></span></p>
                    <hr>
  
                </div>
                <div class="col-md-6 text-center">
                    <img th:src="@{'/imagenes/hoteles/' + ${hotel.fotoHotel}}" class="img-fluid mb-3 reservation-image" alt="Hotel">
                    <img  th:src="@{'/imagenes/habitaciones/' + ${habitacion.fotoHabitacion}}" class="img-fluid reservation-image" alt="Habitación">
                </div>
            </div>

            <div class="text-center mt-4">
                <h4>Total: <span th:text="'$' + ${#numbers.formatDecimal(reserva.precioTotal, 1, 2)}" 
                ></span></h4>
                
                <!-- Para cancelar -->
                <a th:if="${reserva.estado == 'Reservado'}"
                 th:href="@{/user/reservar/cancelarReserva/{idReserva}/{tipoHistorial}(idReserva=${idReserva}, tipoHistorial=${tipoHistorial})}"
                 class="btn btn-secondary btn-danger">Cancelar reservación</a>
                <a th:unless="${reserva.estado == 'Reservado'}" class="btn btn-secondary me-2">Cancelar reservación</a>
				
				<!-- Para editar -->	                
				<a th:if="${reserva.estado == 'Reservado'}"
                 th:href="@{/user/reservar/cambiarReservacion/{idReserva}/{tipoHistorial}(idReserva=${idReserva}, tipoHistorial=${tipoHistorial})}"
                 class="btn btn-primary">Cambiar reservación</a>
                <a th:unless="${reserva.estado == 'Reservado'}" class="btn btn-secondary me-2">Cambiar reservación</a>
                				
                <!-- <a class="btn btn-primary">Cambiar reservación</a> -->
                
                
                <!-- Volver -->
                <a th:href="@{/user/reservar/verReservasPendientes}" class="btn btn-warning">Volver</a>
            </div>
        </div>
    </div>



    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p>&copy; 2024 Cuco Corp. Todos los derechos reservados.</p>
    </footer>

    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/13c51e858e.js" crossorigin="anonymous"></script>
</body>
</html>